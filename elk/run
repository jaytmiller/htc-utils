#! /bin/bash

for comp in `cat components`;
do
    echo =============== starting $comp =================
    $comp/run
done

echo =================== docker ps ======================
docker ps




# sudo chown root.root condorbeat.yml
# sudo chmod 644 condorbeat.yml

# sudo docker run -d \
#      --network=elknet \
#      -v `pwd`/condorbeat.yml:/condorbeat/condorbeat.yml \
#      --name condorbeat \
#      --network elknet \
#      retzkek/condorbeat

# sudo sysctl -w vm.max_map_count=262144
# sudo sysctl -w fs.file-max=65536

# sudo docker run -d \
#      --network=elknet \
#      -p 5601:5601 -p 9200:9200 -p 5044:5044 \
#      --ulimit nofile=65536:65536 \
#      -v elk-data:/var/lib/elasticsearch \
#      -v /var/log/condor:/var/log/condor \
#      --network elknet \
#      --name elk \
#      condor-elk

# docker run \
#        docker.elastic.co/beats/filebeat:7.6.1 \
#        setup -E setup.kibana.host=elk:5601 \
#        -E output.elasticsearch.hosts=["elk:9200"]


